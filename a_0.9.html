<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aquarium Fish Animation</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #1a2980, #26d0ce);
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .aquarium-container {
            position: relative;
            width: 800px;
            height: 500px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        canvas {
            background: linear-gradient(to bottom, #0a3d62, #1e5799);
            display: block;
        }

        .title {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            font-size: 24px;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            font-size: 16px;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="aquarium-container">
        <div class="title">Aquarium Fish Simulation</div>
        <canvas id="aquarium" width="800" height="500"></canvas>
        <div class="instructions">Left-click to add fish food</div>
    </div>

    <script>
        const canvas = document.getElementById('aquarium');
        const ctx = canvas.getContext('2d');

        // Aquarium background elements
        const bubbles = [];
        const plants = [];

        // Fish and food arrays
        let fishes = [];
        let foods = [];

        // Initialize aquarium elements
        function initAquarium() {
            // Create bubbles
            for (let i = 0; i < 30; i++) {
                bubbles.push({
                    x: Math.random() * canvas.width,
                    y: canvas.height + Math.random() * 200,
                    size: Math.random() * 4 + 1,
                    speed: Math.random() * 0.5 + 0.1,
                    opacity: Math.random() * 0.5 + 0.3
                });
            }

            // Create plants
            for (let i = 0; i < 15; i++) {
                plants.push({
                    x: Math.random() * canvas.width,
                    y: canvas.height - 50,
                    width: Math.random() * 30 + 20,
                    height: Math.random() * 80 + 60,
                    color: `hsl(${Math.random() * 60 + 80}, 70%, ${Math.random() * 20 + 30}%)`
                });
            }

            // Create fishes
            for (let i = 0; i < 8; i++) {
                fishes.push(createFish());
            }
        }

        // Create a new fish with random properties
        function createFish() {
            const fishColors = [
                '#FF5252', '#FF4081', '#E040FB', '#7C4DFF',
                '#536DFE', '#448AFF', '#40C4FF', '#18FFFF',
                '#64FFDA', '#69F0AE', '#B2FF59', '#EEFF41'
            ];
            
            return {
                x: Math.random() * canvas.width,
                y: Math.randomt() * canvas.height,
                size: Math.random() * 30 + 20,
                speed: Math.random() * 2 + 1,
                angle: Math.random() * Math.PI * 2,
                color: fishColors[Math.floor(Math.random() * fishColors.length)],
                targetFood: null,
                eating: false,
                tailAngle: 0,
                tailDirection: 1
            };
        }

        // Create a food item at clicked position
        function createFood(x, y) {
            foods.push({
                x: x,
                y: y,
                size: 5,
                eaten: false,
                life: 100
            });
        }

        // Find closest food to a fish
        function findClosestFood(fish) {
            let closest = null;
            let minDistance = Infinity;

            for (const food of foods) {
                if (!food.eaten) {
                    const dx = food.x - fish.x;
                    const dy = food.y - fish.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < minDistance) {
                        minDistance = distance;
                        closest = food;
                    }
                }
            }

            return closest;
        }

        // Update fish movement
        function updateFish(fish) {
            if (fish.eating) {
                // Move toward food
                if (fish.targetFood && !fish.targetFood.eaten) {
                    const dx = fish.targetFood.x - fish.x;
                    const dy = fish.targetFood.y - fish.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < fish.size + fish.targetFood.size) {
                        // Eat the food
                        fish.targetFood.eaten = true;
                        fish.eating = false;
                        fish.targetFood = null;
                    } else {
                        // Move toward food
                        fish.angle = Math.atan2(dy, dx);
                        fish.x += Math.cos(fish.angle) * fish.speed;
                        fish.y += Math.sin(fish.angle) * fish.speed;
                    }
                } else {
                    fish.eating = false;
                    fish.targetFood = null;
                }
            } else {
                // Random swimming behavior
                fish.angle += (Math.random() - 0.5) * 0.1;
                
                // Occasionally look for food
                if (Math.random() < 0.02) {
                    fish.targetFood = findClosestFood(fish);
                    if (fish.targetFood) {
                        fish.eating = true;
                    }
                }

                fish.x += Math.cos(fish.angle) * fish.speed;
                fish.y += Math.sin(fish.angle) * fish.speed;

                // Keep fish within bounds
                if (fish.x < 0) fish.x = canvas.width;
                if (fish.x > canvas.width) fish.x = 0;
                if (fish.y < 0) fish.y = canvas.height;
                if (fish.y > canvas.height) fish.y = 0;
            }

            // Animate tail
            fish.tailAngle += fish.tailDirection * 0.2;
            if (fish.tailAngle > 0.5 || fish.tailAngle < -0.5) {
                fish.tailDirection *= -1;
            }
        }

        // Update bubbles
        function updateBubbles() {
            for (const bubble of bubbles) {
                bubble.y -= bubble.speed;
                if (bubble.y < -20) {
                    bubble.y = canvas.height + Math.random() * 200;
                    bubble.x = Math.random() * canvas.width;
                }
            }
        }

        // Draw the aquarium scene
        function drawScene() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw water gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, 'rgba(10, 61, 98, 0.7)');
            gradient.addColorStop(1, 'rgba(26, 105, 150, 0.9)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw bubbles
            for (const bubble of bubbles) {
                ctx.beginPath();
                ctx.arc(bubble.x, bubble.y, bubble.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${bubble.opacity})`;
                ctx.fill();
            }

            // Draw plants
            for (const plant of plants) {
                ctx.save();
                ctx.translate(plant.x, plant.y);
                ctx.fillStyle = plant.color;
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.bezierCurveTo(
                    plant.width/2, -plant.height/3,
                    -plant.width/2, -plant.height/3,
                    0, -plant.height
                );
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            }

            // Draw food
            for (const food of foods) {
                if (!food.eaten) {
                    ctx.beginPath();
                    ctx.arc(food.x, food.y, food.size, 0, Math.PI * 2);
                    ctx.fillStyle = '#FFD700';
                    ctx.fill();
                    ctx.strokeStyle = '#FFA500';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
            }

            // Draw fishes
            for (const fish of fishes) {
                drawFish(fish);
            }
        }

        // Draw individual fish
        function drawFish(fish) {
            ctx.save();
            ctx.translate(fish.x, fish.y);
            ctx.rotate(fish.angle);

            // Fish body
            ctx.fillStyle = fish.color;
            ctx.beginPath();
            ctx.ellipse(-fish.size/2, 0, fish.size, fish.size/2, 0, 0, Math.PI * 2);
            ctx.fill();

            // Fish tail
            ctx.beginPath();
            ctx.moveTo(-fish.size/2, 0);
            ctx.lineTo(-fish.size/2 - fish.size/3, -fish.size/4);
            ctx.lineTo(-fish.size/2 - fish.size/3, fish.size/4);
            ctx.closePath();
            ctx.fillStyle = fish.color;
            ctx.fill();

            // Fish eye
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(fish.size/3, -fish.size/6, fish.size/8, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(fish.size/3 + fish.size/12, -fish.size/6, fish.size/16, 0, Math.PI * 2);
            ctx.fill();

            ctx.restore();
        }

        // Main animation loop
        function animate() {
            updateBubbles();
            
            for (const fish of fishes) {
                updateFish(fish);
            }

            // Remove eaten food
            foods = foods.filter(food => !food.eaten);

            drawScene();
            requestAnimationFrame(animate);
        }

        // Event listeners
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            createFood(x, y);
        });

        // Start everything
        initAquarium();
        animate();
    </script>
</body>
</html>